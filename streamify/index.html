<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="login_page.css" />
  <title>streamify</title>
</head>

<body>

  <!-- Navbar -->
  <nav>
    <h1>streamify</h1>
  </nav>

  <!-- Login and Register form -->
  <div class="container">
    <input type="checkbox" id="check" />

    <div class="login form">
      <h2>Login</h2>
      <form method="post" action="login.php">
        <input type="text" name="username" placeholder="Username" required /><br />
        <input type="password" name="password" placeholder="Password" required /><br />
        <a href="forgotpassword.html" id="forgot-password">Reset password</a>
        <button type="submit" name="submit">Login</button>
        <div class="signup">
          <span class="signup">Don't have an account?
            <label for="check">Signup</label>

            <div class="login_data">
              <p><span>User:</span><br>user<br>password123</p>
              <p><span>Admin:</span><br>admin<br>password123</p>
            </div>

            <p id="alert"></p>
          </span>
        </div>
      </form>
    </div>

    <div class="registration form">
      <h2>Signup</h2>
      <form method="post" action="register.php">
        <input type="text" name="username" placeholder="Username" required /><br />
        <input type="email" name="email" placeholder="Email" required /><br />
        <input type="password" name="password" placeholder="Password" required /><br />
        <button type="submit" name="submit">Register</button>
        <div class="signup">
          <span class="signup">Already have an account?
            <label for="check">Login</label>
          </span>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>Â© streamify | All Rights Reserved</p>
  </footer>
</body>
<script type="text/javascript">
  const urlParams = new URLSearchParams(window.location.search);
  const alertElement = document.getElementById("alert");
  const loginFailed = urlParams.get("login_failed");
  const registerFailed = urlParams.get("register_failed");
  const registerSucceed = urlParams.get("register_succeed");
  const passwordReset = urlParams.get("password_reset");

  if (alertElement) {
    if (loginFailed) {
      alertElement.innerHTML = "Wrong username or password";
      alertElement.style.color = "red";
    } else if (registerFailed) {
      alertElement.innerHTML = "Username or email already taken";
      alertElement.style.color = "red";
    } else if (registerSucceed) {
      alertElement.innerHTML = "Registration successful.";
      alertElement.style.color = "green";
      alertElement.style.webkitTextStroke = "0.5px";
    } else if (passwordReset) {
      alertElement.innerHTML = "Your password has been reset successfully";
      alertElement.style.color = "green";
      alertElement.style.webkitTextStroke = "0.5px";
    } else {
      console.log("Error");
    }
  }
</script>

</html>